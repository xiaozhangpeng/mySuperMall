{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\SuperMarket\\supermarket\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\SuperMarket\\supermarket\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\SuperMarket\\supermarket\\src\\views\\home\\Home.vue","mtime":1649152479784},{"path":"C:\\Users\\Administrator\\Desktop\\SuperMarket\\supermarket\\node_modules\\_babel-loader@8.2.4@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\SuperMarket\\supermarket\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\SuperMarket\\supermarket\\node_modules\\_vue-loader@15.9.8@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//请求首页数据\nimport {getHomeGoods, getHomeMultidata} from \"../../network/home\"\n\nimport NavBar from \"../../components/common/navbar/NavBar\"\n\nimport Scroll from '../../components/common/scroll/Scroll'\n\nimport RecommendView from \"./RecommendView\"\nimport FeatureView from \"./FeatureView\"\nimport HomeSwiper from \"./HomeSwipper\"\n\nimport BackTop from '../../components/content/backTop/BackTop'\nimport TabControl from \"../../components/content/tabControl\"\nimport GoodsList from \"../../components/content/goods/goodsList\";\n\nexport default{\n    name: \"Home\",\n    components: {\n        NavBar,\n        HomeSwiper,\n        RecommendView,\n        FeatureView,\n        TabControl,\n        GoodsList,\n        Scroll,\n        BackTop\n\n    },\n    data() {\n        return {\n            banners: [],\n            recommends: [],\n            //商品列表的数据\n            goods: {\n                'pop': {page: 0, list: []},\n                'new': {page: 0, list: []},\n                'sell': {page: 0, list: []}\n            },\n            currentType: 'pop',\n\n            //显示小箭头的判断\n            isShowBackTop: false,\n            tabOffsetTop: '',\n            isTabFixed: false,\n            saveY: 0,\n\n\n        }\n    },\n    //计算属性\n    computed: {\n        //切换tab数据\n        showTab() {\n            return this.goods[this.currentType].list\n        }\n    },\n    //组件创建前\n    created() {\n        //1请求多条数据\n        this.getHomeMultidata();\n        //2请求商品数据\n        this.getHomeGoods('pop');\n        this.getHomeGoods('new');\n        this.getHomeGoods('sell');\n    },\n    mounted() {\n        //防抖\n        // const refresh=this.debounce(this.$refs.scroll.scroll.refresh(),200)\n        //事件监听\n        this.$bus.$on('itemImageLoad', () => {\n            // console.log(this.$refs.scroll.scroll.refresh);\n            // this.$refs.scroll.scroll.refresh()\n            this.$refs.scroll.scroll.refresh()\n        });\n    },\n    //记录出Home时的页面位置\n    activated() {\n        this.$refs.scroll.scrollTo(0, this.saveY, 0);\n        this.$refs.scroll.scroll.refresh()\n    },\n    //再次进入Home时保持页面位置\n    deactivated() {\n        this.saveY = this.$refs.scroll.scroll.y\n\n    //取消全局事件监听\n        this.$bus.$off('itemImgLoad', this.itemImgListener);\n    },\n    methods: {\n\n        /*事件点击相关*/\n        //根据子组件传递来的index，来判断点击的哪一个tab\n        tabClick(index) {\n            switch (index) {\n                case 0:\n                    this.currentType = 'pop';\n                    break;\n                case 1:\n                    this.currentType = 'new';\n                    break;\n                case 2:\n                    this.currentType = 'sell';\n                    break\n            }\n            this.$refs.tabControl1.currentIndex = index;\n            this.$refs.tabControl2.currentIndex = index;\n        },\n        //点击小箭头，页面直接到顶端\n\n        // 防抖函数(自己封装)\n        debounce(func, delay) {\n            let timer = null;\n\n            return function (...args) {\n                if (timer) clearTimeout(timer)\n                timer = setTimeout(() => {\n                    func.apply(this, args)\n                }, delay)\n            }\n\n        },\n        //点击箭头回滚到顶部\n        backClick() {\n            this.$refs.scroll.scrollTo(0, 0)\n        },\n        //监听滚动，拿到滚动的位置\n        contentScroll(position) {\n            // 1.判断BackTop是否显示\n            this.isShowBackTop = (-position.y) > 650;\n            //   2.决定tabControl是否吸顶\n            this.isTabFixed = (-position.y) > 650\n        },\n        //上拉加载更多\n        loadMore() {\n            //请求数据\n            this.getHomeGoods(this.currentType);\n        },\n        swiperImageLoad() {\n            // console.log(this.$refs.tabControl.$el.offsetTop)\n            this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\n\n        },\n\n        /*网络请求相关的*/\n        getHomeMultidata() {\n            // 请求多个数据（ajax）\n            getHomeMultidata().then(res => {\n                // console.log(res);\n                this.banners = res.data.banner.list;\n                this.recommends = res.data.recommend.list;\n            })\n        },\n        //请求列表数据\n        getHomeGoods(type) {\n            const page = this.goods[type].page + 1;\n            getHomeGoods(type, page).then(res => {\n\n                this.goods[type].list.push(...res.data.list);\n                this.goods[type].page += 1;\n                this.$refs.scroll.finishPullUp()\n\n                //mock--- concat()方法可以拼接两个数组\n                // this.goods = this.goods.concat(res.data);\n            })\n        }\n    }\n}\n\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n    <div class=\"wraper\" id=\"home\">\n        <!-- 导航栏-->\n        <nav-bar class=\"home-nav\">\n            <div slot=\"center\">购物车</div>\n        </nav-bar>\n        <TabControl :title=\"['流行','新款','精选']\" class=\"tab-control\" ref=\"tabControl1\" v-show=\"isTabFixed\" @tabClick=\"tabClick\"></TabControl>\n\n        <scroll :probe-type=\"3\"\n                :pull-up-load=\"true\"\n                @pullingUp=\"loadMore\"\n                @scroll=\"contentScroll\"\n                class=\"content\"\n                ref=\"scroll\"\n        >\n            <!--  轮播图-->\n            <!--  封装的HomeSwiper-->\n            <HomeSwiper :banners=\"banners\" @swiperImageLoad=\"swiperImageLoad\"></HomeSwiper>\n            <!--展示导航-->\n            <RecommendView :recommends=\"recommends\"></RecommendView>\n            <!--本周流行-->\n            <FeatureView></FeatureView>\n            <!-- TabControl-->\n            <TabControl :class=\"{fixed:isTabFixed}\" :title=\"['流行','新款','精选']\" class=\"tab-control\"   @tabClick=\"tabClick\"\n                        ref=\"tabControl2\"></TabControl>\n            <!-- GoodsList商品展示-->\n            <GoodsList :goods=\"showTab\"></GoodsList>\n        </scroll>\n        <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"/>\n    </div>\n</template>\n\n<script>\n    //请求首页数据\n    import {getHomeGoods, getHomeMultidata} from \"../../network/home\"\n\n    import NavBar from \"../../components/common/navbar/NavBar\"\n\n    import Scroll from '../../components/common/scroll/Scroll'\n\n    import RecommendView from \"./RecommendView\"\n    import FeatureView from \"./FeatureView\"\n    import HomeSwiper from \"./HomeSwipper\"\n\n    import BackTop from '../../components/content/backTop/BackTop'\n    import TabControl from \"../../components/content/tabControl\"\n    import GoodsList from \"../../components/content/goods/goodsList\";\n\n    export default{\n        name: \"Home\",\n        components: {\n            NavBar,\n            HomeSwiper,\n            RecommendView,\n            FeatureView,\n            TabControl,\n            GoodsList,\n            Scroll,\n            BackTop\n\n        },\n        data() {\n            return {\n                banners: [],\n                recommends: [],\n                //商品列表的数据\n                goods: {\n                    'pop': {page: 0, list: []},\n                    'new': {page: 0, list: []},\n                    'sell': {page: 0, list: []}\n                },\n                currentType: 'pop',\n\n                //显示小箭头的判断\n                isShowBackTop: false,\n                tabOffsetTop: '',\n                isTabFixed: false,\n                saveY: 0,\n\n\n            }\n        },\n        //计算属性\n        computed: {\n            //切换tab数据\n            showTab() {\n                return this.goods[this.currentType].list\n            }\n        },\n        //组件创建前\n        created() {\n            //1请求多条数据\n            this.getHomeMultidata();\n            //2请求商品数据\n            this.getHomeGoods('pop');\n            this.getHomeGoods('new');\n            this.getHomeGoods('sell');\n        },\n        mounted() {\n            //防抖\n            // const refresh=this.debounce(this.$refs.scroll.scroll.refresh(),200)\n            //事件监听\n            this.$bus.$on('itemImageLoad', () => {\n                // console.log(this.$refs.scroll.scroll.refresh);\n                // this.$refs.scroll.scroll.refresh()\n                this.$refs.scroll.scroll.refresh()\n            });\n        },\n        //记录出Home时的页面位置\n        activated() {\n            this.$refs.scroll.scrollTo(0, this.saveY, 0);\n            this.$refs.scroll.scroll.refresh()\n        },\n        //再次进入Home时保持页面位置\n        deactivated() {\n            this.saveY = this.$refs.scroll.scroll.y\n\n        //取消全局事件监听\n            this.$bus.$off('itemImgLoad', this.itemImgListener);\n        },\n        methods: {\n\n            /*事件点击相关*/\n            //根据子组件传递来的index，来判断点击的哪一个tab\n            tabClick(index) {\n                switch (index) {\n                    case 0:\n                        this.currentType = 'pop';\n                        break;\n                    case 1:\n                        this.currentType = 'new';\n                        break;\n                    case 2:\n                        this.currentType = 'sell';\n                        break\n                }\n                this.$refs.tabControl1.currentIndex = index;\n                this.$refs.tabControl2.currentIndex = index;\n            },\n            //点击小箭头，页面直接到顶端\n\n            // 防抖函数(自己封装)\n            debounce(func, delay) {\n                let timer = null;\n\n                return function (...args) {\n                    if (timer) clearTimeout(timer)\n                    timer = setTimeout(() => {\n                        func.apply(this, args)\n                    }, delay)\n                }\n\n            },\n            //点击箭头回滚到顶部\n            backClick() {\n                this.$refs.scroll.scrollTo(0, 0)\n            },\n            //监听滚动，拿到滚动的位置\n            contentScroll(position) {\n                // 1.判断BackTop是否显示\n                this.isShowBackTop = (-position.y) > 650;\n                //   2.决定tabControl是否吸顶\n                this.isTabFixed = (-position.y) > 650\n            },\n            //上拉加载更多\n            loadMore() {\n                //请求数据\n                this.getHomeGoods(this.currentType);\n            },\n            swiperImageLoad() {\n                // console.log(this.$refs.tabControl.$el.offsetTop)\n                this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\n\n            },\n\n            /*网络请求相关的*/\n            getHomeMultidata() {\n                // 请求多个数据（ajax）\n                getHomeMultidata().then(res => {\n                    // console.log(res);\n                    this.banners = res.data.banner.list;\n                    this.recommends = res.data.recommend.list;\n                })\n            },\n            //请求列表数据\n            getHomeGoods(type) {\n                const page = this.goods[type].page + 1;\n                getHomeGoods(type, page).then(res => {\n\n                    this.goods[type].list.push(...res.data.list);\n                    this.goods[type].page += 1;\n                    this.$refs.scroll.finishPullUp()\n\n                    //mock--- concat()方法可以拼接两个数组\n                    // this.goods = this.goods.concat(res.data);\n                })\n            }\n        }\n    }\n\n</script>\n\n<style scoped>\n    #home {\n        /*padding-top: 44px;*/\n        height: 100vh;\n        position: relative;\n    }\n\n    .home-nav {\n        background-color: var(--color-tint);\n        color: #fff;\n\n        /*position: fixed;*/\n        /*left: 0;*/\n        /*right: 0;*/\n        /*top: 0;*/\n        /*z-index: 99;*/\n    }\n\n    .tab-control {\n        position: relative;\n        z-index: 9;\n\n    }\n\n    .content {\n        overflow: hidden;\n        position: absolute;\n        top: 44px;\n        bottom: 49px;\n        left: 0;\n        right: 0;\n    }\n\n    /*.content {*/\n    /*height: calc(100% - 93px);*/\n    /*overflow: hidden;*/\n    /*margin-top: 44px;*/\n    /*}*/\n</style>\n"]}]}